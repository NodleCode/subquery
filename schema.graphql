type Collection @entity {
    id: ID!
    collectionId: Int! @index
    issuer: String! @index
    admin: String! @index
    owner: String! @index
    freezer: String
    metadataCid: String
    isDestroyed: Boolean!
    createdAt: Int @index
    updatedAt: Int @index
    items: [Item] @derivedFrom(field: "collection")
}

type Item @entity @compositeIndexes(fields: [["owner", "itemId"]]) {
    id: ID!
    itemId: Int! @index
    collectionItemKey: String! @index
    collection: Collection!
    metadataCid: String
    isBurned: Boolean!
    createdAt: Int @index
    updatedAt: Int @index
    owner: String
}

type BalanceTransfer @entity @compositeIndexes(fields: [["from", "to"]]) {
    id: ID!
    from: String! @index
    to: String! @index
    txHash: String @index
    amount: BigInt @index
    timestamp: Int @index
    blockNumber: BigInt
}

type Rewards @entity @compositeIndexes(fields: [["from", "to"]]) {
    id: ID!
    from: String! @index
    to: String! @index
    txHash: String @index
    amount: BigInt @index
    timestamp: Int @index
    blockNumber: BigInt
}

type TransferToTreasury @entity @compositeIndexes(fields: [["from", "to"]]) {
    id: ID!
    from: String! @index
    to: String! @index
    txHash: String @index
    amount: BigInt @index
    timestamp: Int @index
    blockNumber: BigInt
    isAllocation: Boolean @index
}

type UniquesTransfer @entity @compositeIndexes(fields: [["from", "to"]]) {
    id: ID!
    txHash: String @index
    block: Int @index
    from: String @index
    to: String @index
    collection: Collection!
    item: Item!
    fee: BigInt
    timestamp: Int @index
    success: Boolean
}

type Pot @entity {
    id: ID!
    potId: Int! @index
    owner: String! @index
    feeQuotaBalance: BigInt!
    feeQuotaLimit: BigInt!
    reserveQuotaBalance: BigInt!
    reserveQuotaLimit: BigInt!
    sponsorshipType: String!
    sponsoredAccounts: [AccountPotBalance] @derivedFrom(field: "pot")
    createdAt: Int @index
    updatedAt: Int @index
}

type AccountPotBalance @entity @compositeIndexes(fields: [["pot", "account"]]) {
    id: ID!
    pot: Pot!
    account: Account!
    feeQuotaBalance: BigInt!
    feeQuotaLimit: BigInt!
    reserveQuotaBalance: BigInt!
    reserveQuotaLimit: BigInt!
    createdAt: Int @index
    updatedAt: Int @index
}

type Account @entity {
    id: ID!
    potBalance: [AccountPotBalance] @derivedFrom(field: "account")
    createdAt: Int @index
    updatedAt: Int @index
}
